import{P as n,j as e,y as $,aP as k,aQ as q,b2 as R,t as a,n as G,b6 as L,T as s,d as m,r as Q,bC as P,B as d,a9 as z,aO as J,b1 as U,ab as V,a6 as _,aj as M,az as Y,aA as K,b5 as X,aT as B,bB as Z,a5 as I,G as p}from"./index-DWuWYdwO.js";import{T as l}from"./TableCell-DifTD_db.js";import{a as ee}from"./invoice-CtEBVet3.js";import{D as re}from"./DeleteOutlined-Ce9XbAuj.js";import{S as se}from"./Skeleton-Cqh1Sn3g.js";import{a as ne}from"./react-pdf.browser-fdpOy0uw.js";import{E as te}from"./index-WhEdw1H0.js";import{D as ae}from"./DownloadOutlined-cTRsJVoi.js";import{T as ie,a as le,b as oe}from"./TableContainer-DaSqANyU.js";import{T as de}from"./TableHead-UeT6rlXJ.js";import{T as O}from"./TableRow-Cu26Yl8o.js";function S({onEditItem:o,cellData:t}){return e.jsx(l,{sx:{"& .MuiFormHelperText-root":{position:"absolute",bottom:-24,ml:0}},children:e.jsx($,{type:t.type,placeholder:t.placeholder,name:t.name,id:t.id,value:t.type==="number"?t.value>0?t.value:"":t.value,onChange:o,label:t.label,error:!!(t.errors&&t.touched),inputProps:{...t.type==="number"&&{min:0}}})})}S.propTypes={onEditItem:n.any,cellData:n.any};function H({title:o,open:t,handleClose:r}){return e.jsx(k,{open:t,onClose:()=>r(!1),TransitionComponent:q,keepMounted:!0,maxWidth:"xs","aria-labelledby":"item-delete-title","aria-describedby":"item-delete-description",children:e.jsx(R,{sx:{mt:2,my:1},children:e.jsxs(a,{alignItems:"center",spacing:3.5,children:[e.jsx(G,{color:"error",sx:{width:72,height:72,fontSize:"1.75rem"},children:e.jsx(L,{})}),e.jsxs(a,{spacing:2,children:[e.jsx(s,{variant:"h4",align:"center",children:"Are you sure you want to delete?"}),e.jsxs(s,{align:"center",children:["By deleting",e.jsxs(s,{variant:"subtitle1",component:"span",children:[' "',o,'" ']}),"product, Its details will also be removed from invoice."]})]}),e.jsxs(a,{direction:"row",spacing:2,sx:{width:1},children:[e.jsx(m,{fullWidth:!0,onClick:()=>r(!1),color:"secondary",variant:"outlined",children:"Cancel"}),e.jsx(m,{fullWidth:!0,color:"error",variant:"contained",onClick:()=>r(!0),autoFocus:!0,children:"Delete"})]})]})})})}H.propTypes={title:n.string,open:n.bool,handleClose:n.func};function ce({id:o,name:t,description:r,qty:c,price:C,onDeleteItem:v,onEditItem:F,index:x,Blur:T,errors:u,touched:f}){var N;const{invoiceMaster:j}=ee(),[y,b]=Q.useState(!1),D=h=>{b(!1),h&&(v(x),J({open:!0,message:"Product Deleted successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}))},g=`invoice_detail[${x}].name`,i=P(f,g),w=P(u,g),E=[{placeholder:"Item name",label:"Item Name",name:`invoice_detail.${x}.name`,type:"text",id:o+"_name",value:t,errors:w,touched:i},{placeholder:"Description",label:"Description",name:`invoice_detail.${x}.description`,type:"text",id:o+"_description",value:r},{placeholder:"",label:"Qty",type:"number",name:`invoice_detail.${x}.qty`,id:o+"_qty",value:c},{placeholder:"",label:"price",type:"number",name:`invoice_detail.${x}.price`,id:o+"_price",value:C}];return e.jsxs(e.Fragment,{children:[E.map(h=>e.jsx(S,{onEditItem:A=>F(A),onBlur:A=>T(A),cellData:{placeholder:h.placeholder,name:h.name,type:h.type,id:h.id,value:h.value,errors:h.errors,touched:h.touched}},h.label)),e.jsx(l,{children:e.jsx(a,{direction:"column",justifyContent:"flex-end",alignItems:"flex-end",spacing:2,children:e.jsx(d,{sx:{pl:2},children:j===void 0?e.jsx(se,{width:520,height:16}):e.jsx(s,{children:((N=j.country)==null?void 0:N.prefix)+""+(C*c).toFixed(2)})})})}),e.jsx(l,{align:"center",children:e.jsx(z,{title:"Remove Item",children:e.jsx(m,{color:"error",onClick:()=>b(!0),children:e.jsx(re,{})})})}),e.jsx(H,{title:t,open:y,handleClose:D})]})}ce.propTypes={id:n.any,name:n.any,description:n.any,qty:n.any,price:n.any,onDeleteItem:n.any,onEditItem:n.any,index:n.any,Blur:n.any,errors:n.any,touched:n.any};function he({open:o,setOpen:t,handlerAddress:r}){function c(){t(!1)}return e.jsxs(k,{maxWidth:"sm",open:o,onClose:c,sx:{"& .MuiDialog-paper":{p:0},"& .MuiBackdrop-root":{opacity:"0.5 !important"}},children:[e.jsx(U,{children:e.jsxs(a,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(s,{variant:"h5",children:"Select Address"}),e.jsx(m,{startIcon:e.jsx(V,{}),onClick:c,color:"primary",children:"Add New"})]})}),e.jsx(_,{}),e.jsxs(R,{sx:{p:2.5},children:[e.jsx(M,{sx:{width:"100%",pb:2},children:e.jsx($,{autoFocus:!0,id:"name",InputProps:{startAdornment:e.jsx(Y,{position:"start",children:e.jsx(K,{})})},placeholder:"Search",fullWidth:!0})}),e.jsx(a,{spacing:2,children:e.jsx(W,{handlerAddress:r})})]}),e.jsx(_,{}),e.jsxs(X,{sx:{p:2.5},children:[e.jsx(m,{color:"error",onClick:c,children:"Cancel"}),e.jsx(m,{onClick:c,color:"primary",variant:"contained",children:"Add"})]})]})}function W({handlerAddress:o}){const t=[{name:"Ian Carpenter",address:"1754 Ureate, RhodSA5 5BO",phone:"+91 1234567890",email:"iacrpt65@gmail.com"},{name:"Belle J. Richter",address:"1300 Mine RoadQuemado, NM 87829",phone:"305-829-7809",email:"belljrc23@gmail.com"},{name:"Ritika Yohannan",address:"3488 Arbutus DriveMiami, FL",phone:"+91 1234567890",email:"rtyhn65@gmail.com"},{name:"Jesse G. Hassen",address:"3488 Arbutus DriveMiami, FL 33012",phone:"+91 1234567890",email:"jessghs78@gmail.com"},{name:"Christopher P. Iacovelli",address:"4388 House DriveWesrville, OH",phone:"+91 1234567890",email:"crpthl643@gmail.com"},{name:"Thomas D. Johnson",address:"4388 House DriveWestville, OH +91",phone:"1234567890",email:"thomshj56@gmail.com"}];return e.jsx(e.Fragment,{children:t.map(r=>e.jsxs(d,{onClick:()=>o(r),sx:{width:"100%",border:"1px solid",borderColor:"grey.200",borderRadius:1,p:1.25,"&:hover":{bgcolor:"primary.lighter",borderColor:"primary.lighter"}},children:[e.jsx(s,{variant:"subtitle1",children:r.name}),e.jsxs(a,{direction:{xs:"column",sm:"row"},spacing:1,children:[e.jsx(s,{variant:"body2",color:"secondary",children:r.address}),e.jsx(s,{variant:"body2",color:"secondary",children:r.phone}),e.jsx(s,{variant:"body2",color:"secondary",children:r.email})]})]},r.email))})}he.propTypes={open:n.bool,setOpen:n.func,handlerAddress:n.func};W.propTypes={handlerAddress:n.func};function xe({isOpen:o,setIsOpen:t,invoiceInfo:r,items:c,onAddNextInvoice:C}){var b,D,g;function v(){t(!1)}const F=()=>{t(!1),C()};let x,T;try{x=B(new Date(r.date),"dd/mm/yyyy"),T=B(new Date(r.due_date),"dd/MM/yyyy")}catch(i){console.log("error - ",i)}const u=(b=r==null?void 0:r.invoice_detail)==null?void 0:b.reduce((i,w)=>w.name.trim().length>0?i+Number(w.price*Math.floor(w.qty)):i,0),f=r.tax*u/100,j=r.discount*u/100,y=u-j+f;return e.jsx(k,{open:o,onClose:v,maxWidth:"md",sx:{"& .MuiDialog-paper":{p:0,minWidth:{xl:1200,sm:"calc(100% - 20%)"}},"& .MuiBackdrop-root":{opacity:"0.5 !important"}},children:e.jsxs(d,{sx:{pb:2.5},children:[e.jsx("span",{"aria-hidden":"true",children:"â€‹"}),e.jsxs(d,{id:"print",sx:{p:2.5},children:[e.jsxs(d,{sx:{pb:2.5},children:[e.jsxs(a,{sx:{flexDirection:{xs:"column",sm:"row"}},justifyContent:"space-between",children:[e.jsxs(d,{sx:{pt:2.5},children:[e.jsxs(a,{direction:"row",spacing:2,children:[e.jsx(Z,{})," ",e.jsx(I,{label:"Paid",variant:"light",color:"success"})]}),e.jsx(s,{color:"secondary",children:r.invoice_id})]}),e.jsxs(d,{sx:{pt:2.5,pb:1.75},children:[e.jsxs(a,{direction:"row",justifyContent:"space-between",children:[e.jsxs(s,{sx:{pl:4},variant:"subtitle1",children:["Date"," "]}),e.jsx(s,{children:x})]}),e.jsxs(a,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{sx:{pr:2,overflow:"hidden"},variant:"subtitle1",children:"Due Date"}),e.jsx(s,{children:T})]})]})]}),e.jsx(d,{sx:{pt:2.5},children:e.jsxs(p,{container:!0,spacing:2,justifyContent:"space-between",direction:"row",children:[e.jsx(p,{item:!0,xs:12,sm:6,children:e.jsx(d,{sx:{border:1,minHeight:168,borderColor:"grey.200",borderRadius:.5,p:2.5},children:e.jsx(p,{container:!0,direction:"row",children:e.jsxs(p,{item:!0,md:8,children:[e.jsx(s,{variant:"h5",children:"From:"}),e.jsxs(M,{sx:{width:"100%"},children:[e.jsx(s,{variant:"subtitle1",children:r.cashierInfo.name}),e.jsx(s,{color:"secondary",children:r.cashierInfo.address}),e.jsx(s,{color:"secondary",children:r.cashierInfo.phone}),e.jsx(s,{color:"secondary",children:r.cashierInfo.email})]})]})})})}),e.jsx(p,{item:!0,xs:12,sm:6,children:e.jsx(d,{sx:{border:1,minHeight:168,borderColor:"grey.200",borderRadius:.5,p:2.5},children:e.jsx(p,{container:!0,direction:"row",children:e.jsxs(p,{item:!0,md:8,children:[e.jsx(s,{variant:"h5",children:"To:"}),e.jsxs(M,{sx:{width:"100%"},children:[e.jsx(s,{variant:"subtitle1",children:r.customerInfo.name}),e.jsx(s,{color:"secondary",children:r.customerInfo.address}),e.jsx(s,{color:"secondary",children:r.customerInfo.phone}),e.jsx(s,{color:"secondary",children:r.customerInfo.email})]})]})})})})]})})]}),e.jsx(ie,{children:e.jsxs(le,{children:[e.jsx(de,{children:e.jsxs(O,{children:[e.jsx(l,{children:"#"}),e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Description"}),e.jsx(l,{align:"right",children:"Qty"}),e.jsx(l,{align:"right",children:"Price"}),e.jsx(l,{align:"right",children:"Amount"})]})}),e.jsx(oe,{children:c.map(i=>e.jsxs(O,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(l,{children:c.indexOf(i)+1}),e.jsx(l,{children:i.name}),e.jsx(l,{children:i.description}),e.jsx(l,{align:"right",children:i.qty}),e.jsxs(l,{align:"right",children:["$",Number(i.price).toFixed(2)]}),e.jsxs(l,{align:"right",children:["$",Number(i.price*i.qty).toFixed(2)]})]},i.name))})]})}),e.jsx(d,{sx:{p:2.5},children:e.jsx(p,{container:!0,direction:"row",justifyContent:"flex-end",children:e.jsx(p,{item:!0,md:4,children:e.jsxs(a,{spacing:2,children:[e.jsxs(a,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{color:"secondary",children:"Sub Total:"}),e.jsxs(s,{variant:"h6",children:["$",u.toFixed(2)]})]}),e.jsxs(a,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{color:"secondary",children:"Discount:"}),e.jsxs(s,{variant:"h6",color:"success.main",children:["$",j.toFixed(2)]})]}),e.jsxs(a,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{color:"grey.500",children:"Tax:"}),e.jsxs(s,{variant:"h6",children:["$",f.toFixed(2)]})]}),e.jsxs(a,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{sx:{pr:2},variant:"subtitle1",children:"Grand Total:"}),e.jsxs(s,{variant:"h6",children:["$",y%1===0?y:y.toFixed(2)]})]})]})})})})]}),e.jsx(d,{sx:{p:2.5},children:e.jsxs(s,{children:["Notes: ",r.notes]})}),e.jsxs(a,{direction:"row",justifyContent:"flex-end",spacing:2,sx:{p:2.5},children:[e.jsx(m,{color:"secondary",onClick:F,children:"Cancel"}),e.jsx(ne,{document:e.jsx(te,{list:r}),fileName:`${(r==null?void 0:r.invoiceId)||(r==null?void 0:r.invoice_id)}-${(r==null?void 0:r.customer_name)||((D=r==null?void 0:r.from)==null?void 0:D.name)||((g=r==null?void 0:r.customerInfo)==null?void 0:g.name)}.pdf`,style:{textDecoration:"none"},children:e.jsx(m,{startIcon:e.jsx(ae,{}),variant:"contained",color:"primary",children:"Download"})})]})]})})}xe.propTypes={isOpen:n.any,setIsOpen:n.any,invoiceInfo:n.any,items:n.any,onAddNextInvoice:n.any};export{he as A,ce as I,xe as a};
