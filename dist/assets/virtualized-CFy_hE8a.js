import{j as e,r as x,a5 as S,M as O,cD as H,t as U,B as Y,P as K,G as v}from"./index-BHUrCk0l.js";import{u as Q,b as E,g as Z,S as F,f as C}from"./ScrollX-DcGhAfcX.js";import{u as I}from"./index-D2ELweeo.js";import{Q as ee,i as k,h as te,c as se,u as ae,a as re,b as oe,k as ie}from"./useBaseQuery-6TizKLu9.js";import{L as $}from"./LinearWithLabel-y4iFSsOL.js";import{C as A,H as ne}from"./Filter-DSKEKrb1.js";import{m as W}from"./react-table-c1OiOfP-.js";import{T as G,a as L,b as q}from"./TableContainer-DaC-e6W2.js";import{T as X}from"./TableHead-CKGYOjxM.js";import{T as j}from"./TableRow-Cq0HkC_w.js";import{T as b}from"./TableCell-Cc1KRl3a.js";import"./DownloadOutlined-BSo1VBPW.js";import"./CaretDownOutlined-D6iVVplt.js";import"./CaretUpOutlined-CDN-dwPs.js";import"./Slider-WmQyGqAk.js";import"./visuallyHidden-J1ppfhCd.js";import"./CheckOutlined-DgrF9T0m.js";import"./Pagination-ypUxIMC7.js";import"./index-CkjyhU3Q.js";import"./Checkbox-CD0fXkyM.js";import"./MinusOutlined-oI906KYU.js";import"./index-8VKuvd1R.js";var le=class extends ee{constructor(t,o){super(t,o)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t,o){super.setOptions({...t,behavior:k()},o)}getOptimisticResult(t){return t.behavior=k(),super.getOptimisticResult(t)}fetchNextPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"backward"}}})}createResult(t,o){var h,p,g,f;const{state:n}=t,m=super.createResult(t,o),{isFetching:l,isRefetching:u}=m,i=l&&((p=(h=n.fetchMeta)==null?void 0:h.fetchMore)==null?void 0:p.direction)==="forward",d=l&&((f=(g=n.fetchMeta)==null?void 0:g.fetchMore)==null?void 0:f.direction)==="backward";return{...m,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:te(o,n.data),hasPreviousPage:se(o,n.data),isFetchingNextPage:i,isFetchingPreviousPage:d,isRefetching:u&&!i&&!d}}};function ce(t,o){return ae(t,le,o)}const B=25,ue=new oe,me=(t,o,n)=>{const m=[...W(1e3)];if(n.length){const l=n[0],{id:u,desc:i}=l;m.sort((d,h)=>i?d[u]<h[u]?1:-1:d[u]>h[u]?1:-1)}return{data:m.slice(t,t+o),meta:{totalRowCount:m.length}}};function he(){var z,M,N,V;const t=x.useRef(null),[o,n]=x.useState([]),m=x.useMemo(()=>[{header:"Name",accessorKey:"fullName"},{header:"Email",accessorKey:"email"},{header:"Age",accessorKey:"age",meta:{className:"cell-right"}},{header:"Role",accessorKey:"role"},{header:"Visits",accessorKey:"visits",meta:{className:"cell-right"}},{header:"Status",accessorKey:"status",cell:s=>{switch(s.getValue()){case"Complicated":return e.jsx(S,{color:"error",label:"Complicated",size:"small",variant:"light"});case"Relationship":return e.jsx(S,{color:"success",label:"Relationship",size:"small",variant:"light"});case"Single":default:return e.jsx(S,{color:"info",label:"Single",size:"small",variant:"light"})}}},{header:"Profile Progress",accessorKey:"progress",cell:s=>e.jsx($,{value:s.getValue(),sx:{minWidth:75}})}],[]),{data:l,fetchNextPage:u,isFetching:i}=ce({queryKey:["table-data",o],queryFn:async({pageParam:s=0})=>{const a=s*B;return me(a,B,o)},initialPageParam:1,getNextPageParam:(s,a)=>a.length,placeholderData:ie,refetchOnWindowFocus:!1}),d=x.useMemo(()=>{var s;return((s=l==null?void 0:l.pages)==null?void 0:s.flatMap(a=>a.data))??[]},[l]),h=((M=(z=l==null?void 0:l.pages)==null?void 0:z[0])==null?void 0:M.meta.totalRowCount)??0,p=d.length,g=x.useCallback(s=>{if(s){const{scrollHeight:a,scrollTop:P,clientHeight:J}=s;a-P-J<300&&!i&&p<h&&u()}},[u,i,p,h]);x.useEffect(()=>{g(t.current)},[g]);const f=Q({data:d,columns:m,state:{sorting:o},onSortingChange:n,getCoreRowModel:E(),getSortedRowModel:Z(),debugTable:!0}),{rows:y}=f.getRowModel(),c=I({count:y.length,getScrollElement:()=>t.current,estimateSize:()=>34,overscan:10}),r=c.getVirtualItems(),w=c.getTotalSize(),R=r.length>0&&((N=r==null?void 0:r[0])==null?void 0:N.start)||0,D=r.length>0?w-(((V=r==null?void 0:r[r.length-1])==null?void 0:V.end)||0):0;let T=[];return f.getAllColumns().map(s=>T.push({label:typeof s.columnDef.header=="string"?s.columnDef.header:"#",key:s.columnDef.accessorKey})),e.jsx(O,{content:!1,title:"Virtualized Infinite Scroll",secondary:e.jsx(A,{data:r.map(s=>y[s.index].original),headers:T,filename:"virtualized-ininite.csv"}),children:e.jsx(F,{children:e.jsx(G,{component:H,ref:t,onScroll:s=>g(s.target),sx:{height:544,overflow:"auto"},children:e.jsxs(L,{children:[e.jsx(X,{children:f.getHeaderGroups().map(s=>e.jsx(j,{children:s.headers.map(a=>(a.column.columnDef.meta!==void 0&&a.column.getCanSort()&&Object.assign(a.column.columnDef.meta,{className:a.column.columnDef.meta.className+" cursor-pointer prevent-select"}),e.jsx(b,{...a.column.columnDef.meta,onClick:a.column.getToggleSortingHandler(),...a.column.getCanSort()&&a.column.columnDef.meta===void 0&&{className:"cursor-pointer prevent-select"},children:a.isPlaceholder?null:e.jsxs(U,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(Y,{children:C(a.column.columnDef.header,a.getContext())}),a.column.getCanSort()&&e.jsx(ne,{column:a.column})]})},a.id)))},s.id))}),e.jsxs(q,{children:[R>0&&e.jsx(j,{children:e.jsx(b,{sx:{height:`${R}px`,whiteSpace:"nowrap"}})}),r.map(s=>{const a=y[s.index];return e.jsx(j,{children:a.getVisibleCells().map(P=>e.jsx(b,{sx:{whiteSpace:"nowrap"},...P.column.columnDef.meta,children:C(P.column.columnDef.cell,P.getContext())},P.id))},a.id)}),D>0&&e.jsx(j,{children:e.jsx(b,{sx:{height:`${D}px`,whiteSpace:"nowrap"}})})]})]})})})})}function de(){return e.jsx(re,{client:ue,children:e.jsx(he,{})})}function _({columns:t,data:o}){var f,y;const n=Q({data:o,columns:t,getCoreRowModel:E()}),m=x.useRef(null),{rows:l}=n.getRowModel(),u=I({count:l.length,getScrollElement:()=>m.current,estimateSize:()=>34,overscan:10}),i=u.getVirtualItems(),d=u.getTotalSize(),h=i.length>0&&((f=i==null?void 0:i[0])==null?void 0:f.start)||0,p=i.length>0?d-(((y=i==null?void 0:i[i.length-1])==null?void 0:y.end)||0):0;let g=[];return n.getAllColumns().map(c=>g.push({label:typeof c.columnDef.header=="string"?c.columnDef.header:"#",key:c.columnDef.accessorKey})),e.jsx(O,{content:!1,title:"Virtualized Rows",secondary:e.jsx(A,{data:i.map(c=>l[c.index].original),headers:g,filename:"virtualized-row.csv"}),children:e.jsx(F,{children:e.jsx(G,{component:H,ref:m,sx:{height:544,overflow:"auto"},children:e.jsxs(L,{children:[e.jsx(X,{className:"sticky-header",children:n.getHeaderGroups().map(c=>e.jsx(j,{children:c.headers.map(r=>e.jsx(b,{...r.column.columnDef.meta,children:r.isPlaceholder?null:C(r.column.columnDef.header,r.getContext())},r.id))},c.id))}),e.jsxs(q,{children:[h>0&&e.jsx(j,{children:e.jsx(b,{sx:{height:`${h}px`,whiteSpace:"nowrap"}})}),i.map(c=>{const r=l[c.index];return e.jsx(j,{children:r.getVisibleCells().map(w=>e.jsx(b,{sx:{whiteSpace:"nowrap"},...w.column.columnDef.meta,children:C(w.column.columnDef.cell,w.getContext())},w.id))},r.id)}),p>0&&e.jsx(j,{children:e.jsx(b,{sx:{height:`${p}px`,whiteSpace:"nowrap"}})})]})]})})})})}function ge(){const t=W(100),o=x.useMemo(()=>[{header:"Name",accessorKey:"fullName"},{header:"Email",accessorKey:"email"},{header:"Age",accessorKey:"age",meta:{className:"cell-right"}},{header:"Role",accessorKey:"role"},{header:"Visits",accessorKey:"visits",meta:{className:"cell-right"}},{header:"Status",accessorKey:"status",cell:n=>{switch(n.getValue()){case"Complicated":return e.jsx(S,{color:"error",label:"Complicated",size:"small",variant:"light"});case"Relationship":return e.jsx(S,{color:"success",label:"Relationship",size:"small",variant:"light"});case"Single":default:return e.jsx(S,{color:"info",label:"Single",size:"small",variant:"light"})}}},{header:"Profile Progress",accessorKey:"progress",cell:n=>e.jsx($,{value:n.getValue(),sx:{minWidth:75}})}],[]);return e.jsx(_,{columns:o,data:t})}_.propTypes={columns:K.array,data:K.array};function He(){return e.jsxs(v,{container:!0,spacing:3,children:[e.jsx(v,{item:!0,xs:12,children:e.jsx(de,{})}),e.jsx(v,{item:!0,xs:12,children:e.jsx(ge,{})})]})}export{He as default};
