import{av as J,aV as Q,aW as Z,aX as ee,aY as re,j as e,ax as te,ae as ie,B as I,t as j,T as B,a9 as V,x as W,_ as ne,a6 as se,a_ as ae,a$ as le,G as c,b3 as y,y as O,be as oe,g as de,I as ce,aj as q,R as ue,F as _,v as A,ah as he,z,bf as pe,b4 as H,A as xe,d as L,aO as F,c as G,r as T,bg as ze,e as me,ap as je,aq as fe,aT as ge,w as ye,h as U,P,a1 as Re,a2 as qe,aK as Ee,aG as Be,aC as Ve,aH as Fe,M as $e,ab as He}from"./index-BHUrCk0l.js";import{u as R,a as Ue,P as we,A as ke,h as Le,d as Ge,b as Ne,C as Xe,c as Ke,e as Se,E as Ye,f as Je,D as Qe,I as Ze,g as er,i as rr}from"./ItemDetails-CzuAUwAq.js";import{M as ve}from"./MultiFile-BjLaFl0U.js";import{D as be}from"./DesktopDatePicker-CZYFORWK.js";import{T as E}from"./TableRow-Cq0HkC_w.js";import{T as u}from"./TableCell-Cc1KRl3a.js";import{T as De,a as Ce,b as Te}from"./TableContainer-DaC-e6W2.js";import{T as tr}from"./TableHead-CKGYOjxM.js";import"./redux-D8VgfUav.js";import"./AppstoreOutlined-RRBl6bxa.js";import"./VideoCameraAddOutlined-CGNxRs7c.js";import"./CloseCircleFilled-8WQSQj22.js";import"./dateViewRenderers-BhOy5den.js";import"./useSlotProps-BeK_f2Qt.js";const ir=new J.Chance,nr=Q({title:Z().required("User story title is required"),dueDate:ee().required("Due date is required").nullable()}),sr=({open:l,handleDrawerOpen:n})=>{const{backlogs:d}=R(),t=re({initialValues:{id:"",title:"",assign:null,columnId:"",priority:"low",dueDate:null,acceptance:"",description:"",commentIds:"",image:!1,itemIds:[],files:[]},enableReinitialize:!0,validationSchema:nr,onSubmit:(r,{resetForm:s})=>{r.id=`${ir.integer({min:1e3,max:9999})}`,Ue(r),F({open:!0,message:"Submit Success",variant:"alert",alert:{color:"success"}}),n(),s()}});return e.jsx(te,{sx:{ml:l?3:0,flexShrink:0,zIndex:1200,overflowX:"hidden",width:{xs:320,md:450},"& .MuiDrawer-paper":{width:{xs:320,md:450},border:"none",borderRadius:"0px"}},variant:"temporary",anchor:"right",open:l,ModalProps:{keepMounted:!0},onClose:n,children:l&&e.jsxs(ie,{sx:{overflowX:"hidden",height:"100vh"},children:[e.jsx(I,{sx:{p:3},children:e.jsxs(j,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(B,{variant:"h4",children:"Add Story"}),e.jsx(V,{title:"Close",children:e.jsx(W,{color:"secondary",onClick:n,size:"small",sx:{fontSize:"0.875rem"},children:e.jsx(ne,{})})})]})}),e.jsx(se,{}),e.jsx(I,{sx:{p:3},children:e.jsx("form",{onSubmit:t.handleSubmit,children:e.jsx(ae,{dateAdapter:le,children:e.jsxs(c,{container:!0,spacing:2.5,children:[e.jsx(c,{item:!0,xs:12,children:e.jsxs(j,{spacing:1,children:[e.jsx(y,{children:"Title"}),e.jsx(O,{fullWidth:!0,id:"title",name:"title",placeholder:"Title",value:t.values.title,onChange:t.handleChange,error:t.touched.title&&!!t.errors.title,helperText:t.touched.title&&t.errors.title})]})}),e.jsx(c,{item:!0,xs:12,children:e.jsxs(j,{spacing:1,children:[e.jsx(y,{children:"Assign to"}),e.jsx(oe,{id:"assign",value:(d==null?void 0:d.profiles.find(r=>r.id===t.values.assign))||null,onChange:(r,s)=>{t.setFieldValue("assign",s==null?void 0:s.id)},options:d==null?void 0:d.profiles,fullWidth:!0,autoHighlight:!0,getOptionLabel:r=>r.name,isOptionEqualToValue:r=>r.id===t.values.assign,renderOption:({key:r,...s},p)=>e.jsxs(I,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...s,children:[e.jsx("img",{loading:"lazy",width:"20",src:de(`${p.avatar}`,ce.USERS),alt:""}),p.name]},r),renderInput:r=>e.jsx(O,{...r,placeholder:"Choose a assignee",inputProps:{...r.inputProps,autoComplete:"new-password"}})})]})}),e.jsx(c,{item:!0,xs:12,children:e.jsxs(j,{spacing:1,children:[e.jsx(y,{children:"Prioritize"}),e.jsx(q,{children:e.jsxs(ue,{row:!0,"aria-label":"color",value:t.values.priority,onChange:t.handleChange,name:"priority",id:"priority",children:[e.jsx(_,{value:"low",control:e.jsx(A,{color:"primary",sx:{color:"primary.main"}}),label:"Low"}),e.jsx(_,{value:"medium",control:e.jsx(A,{color:"warning",sx:{color:"warning.main"}}),label:"Medium"}),e.jsx(_,{value:"high",control:e.jsx(A,{color:"error",sx:{color:"error.main"}}),label:"High"})]})})]})}),e.jsx(c,{item:!0,xs:12,children:e.jsxs(j,{spacing:1,children:[e.jsx(y,{children:"Due date"}),e.jsx(be,{value:t.values.dueDate,format:"dd/MM/yyyy",onChange:r=>{t.setFieldValue("dueDate",r)}})]})}),e.jsx(c,{item:!0,xs:12,children:e.jsxs(j,{spacing:1,children:[e.jsx(y,{children:"Acceptance"}),e.jsx(O,{fullWidth:!0,id:"acceptance",name:"acceptance",multiline:!0,rows:3,value:t.values.acceptance,onChange:t.handleChange,error:t.touched.acceptance&&!!t.errors.acceptance,helperText:t.touched.acceptance&&t.errors.acceptance})]})}),e.jsx(c,{item:!0,xs:12,children:e.jsxs(j,{spacing:1,children:[e.jsx(y,{children:"Description"}),e.jsx(O,{fullWidth:!0,id:"description",name:"description",multiline:!0,rows:3,value:t.values.description,onChange:t.handleChange,error:t.touched.description&&!!t.errors.description,helperText:t.touched.description&&t.errors.description})]})}),e.jsx(c,{item:!0,xs:12,children:e.jsxs(j,{spacing:1,children:[e.jsx(y,{children:"State"}),e.jsx(q,{fullWidth:!0,sx:{m:1},children:e.jsx(he,{id:"columnId",name:"columnId",displayEmpty:!0,value:t.values.columnId,onChange:t.handleChange,inputProps:{"aria-label":"Without label"},children:d==null?void 0:d.columns.map((r,s)=>e.jsx(z,{value:r.id,children:r.title},s))})})]})}),e.jsx(c,{item:!0,xs:12,children:e.jsxs(c,{container:!0,spacing:1,children:[e.jsx(c,{item:!0,xs:12,children:e.jsx(y,{sx:{mt:.5},children:"Attachments:"})}),e.jsx(c,{item:!0,xs:12,children:e.jsx(ve,{type:pe.STANDARD,showList:!0,setFieldValue:t.setFieldValue,files:t.values.files,error:t.touched.files&&!!t.errors.files})}),t.touched.files&&t.errors.files&&e.jsx(c,{item:!0,xs:12,children:e.jsx(H,{error:!0,id:"standard-weight-helper-text-password-login",children:t.errors.files})})]})}),e.jsx(c,{item:!0,xs:12,children:e.jsx(xe,{children:e.jsx(L,{fullWidth:!0,variant:"contained",type:"submit",children:"Save"})})})]})})})})]})})},ar=sr,lr=(l,n)=>{const d=ye(n.palette.mode===U.DARK?n.palette.background.paper:n.palette.primary.lighter,.9);return{background:l?d:"transparent",userSelect:"none"}};function Oe({itemId:l,index:n}){const d=G(),{backlogs:t}=R(),r=t==null?void 0:t.items.filter(i=>i.id===l)[0],s=t==null?void 0:t.columns.filter(i=>i.itemIds.filter(o=>o===r.id)[0])[0],p=t==null?void 0:t.profiles.filter(i=>i.id===r.assign)[0],x=()=>{Le(l)},[v,g]=T.useState(null),f=i=>{g(i==null?void 0:i.currentTarget)},w=()=>{g(null)},[C,b]=T.useState(!1),a=i=>{b(!1),i&&(Ge(r.id),F({open:!0,message:"Task Deleted successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}))};return e.jsx(we,{draggableId:r.id,index:n,children:(i,o)=>e.jsxs(E,{hover:!0,...i.draggableProps,...i.dragHandleProps,ref:i.innerRef,sx:{"& th,& td":{whiteSpace:"nowrap"},"& .more-button":{opacity:0},":hover":{"& .more-button":{opacity:1}},...!!v&&{"& .more-button":{opacity:1}},...lr(o.isDragging,d)},children:[e.jsx(u,{sx:{pl:3,minWidth:120,width:120,height:46}}),e.jsx(u,{sx:{width:110,minWidth:110},children:e.jsxs(j,{direction:"row",spacing:.75,alignItems:"center",children:[e.jsx(ze,{style:{color:d.palette.info.main,marginTop:-2}}),e.jsx(B,{variant:"subtitle2",children:r.id})]})}),e.jsx(u,{sx:{maxWidth:"calc(100vw - 850px)",minWidth:140},component:"th",scope:"row",children:e.jsx(me,{underline:"hover",color:"default",onClick:x,sx:{overflow:"hidden",display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",":hover":{color:"info.main"},cursor:"pointer"},children:r.title})}),e.jsxs(u,{sx:{width:60,minWidth:60},children:[e.jsx(W,{className:"more-button",size:"small",onClick:f,"aria-controls":"menu-comment","aria-haspopup":"true",color:"secondary",children:e.jsx(je,{style:{color:d.palette.text.primary}})}),e.jsxs(fe,{id:"menu-comment",anchorEl:v,keepMounted:!0,open:!!v,onClose:w,variant:"selectedMenu",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(z,{onClick:()=>{w(),x()},children:"Edit"}),e.jsx(z,{onClick:()=>{w(),b(!0)},children:"Delete"})]}),e.jsx(ke,{title:r.title,open:C,handleClose:a})]}),e.jsx(u,{sx:{width:90,minWidth:90},children:s?s.title:"New"}),e.jsx(u,{sx:{width:140,minWidth:140},children:p?p.name:""}),e.jsx(u,{sx:{width:85,minWidth:85,textTransform:"capitalize"},children:r.priority}),e.jsx(u,{sx:{width:120,minWidth:120},children:r.dueDate?ge(new Date(r.dueDate),"d MMM yyyy"):""})]},r.id)})}Oe.propTypes={itemId:P.string,index:P.number};const or=new J.Chance,dr=Q({title:Z().required("Task title is required"),dueDate:ee().required("Due date is required").nullable()});function Ie({open:l,handleDrawerOpen:n,storyId:d}){const{backlogs:t}=R(),r=re({initialValues:{id:"",title:"",assign:null,priority:"low",dueDate:null,description:"",commentIds:"",image:!1,storyId:"",columnId:t==null?void 0:t.columns[0].id,files:[]},enableReinitialize:!0,validationSchema:dr,onSubmit:(s,{resetForm:p})=>{const x={id:s.id||`${or.integer({min:1e3,max:9999})}`,title:s.title,assign:s.assign,priority:s.priority,dueDate:s.dueDate?new Date(s.dueDate):new Date,description:s.description,commentIds:s.commentIds,image:s.image};Ne(s.columnId,x,d),F({open:!0,message:"Submit Success",variant:"alert",alert:{color:"success"}}),n(),p()}});return e.jsx(te,{sx:{ml:l?3:0,flexShrink:0,zIndex:1200,overflowX:"hidden",width:{xs:320,md:450},"& .MuiDrawer-paper":{width:{xs:320,md:450},border:"none",borderRadius:"0px"}},variant:"temporary",anchor:"right",open:l,ModalProps:{keepMounted:!0},onClose:n,children:l&&e.jsxs(ie,{sx:{overflowX:"hidden",height:"100vh"},children:[e.jsx(I,{sx:{p:3},children:e.jsxs(j,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(B,{variant:"h4",children:"Add Task"}),e.jsx(V,{title:"Close",children:e.jsx(W,{color:"secondary",onClick:n,size:"small",sx:{fontSize:"0.875rem"},children:e.jsx(ne,{})})})]})}),e.jsx(se,{}),e.jsx(I,{sx:{p:3},children:e.jsx("form",{onSubmit:r.handleSubmit,children:e.jsx(ae,{dateAdapter:le,children:e.jsxs(c,{container:!0,spacing:2.5,children:[e.jsx(c,{item:!0,xs:12,children:e.jsxs(j,{spacing:1,children:[e.jsx(y,{children:"Title"}),e.jsx(O,{fullWidth:!0,id:"title",name:"title",placeholder:"Title",value:r.values.title,onChange:r.handleChange,error:r.touched.title&&!!r.errors.title,helperText:r.touched.title&&r.errors.title})]})}),e.jsx(c,{item:!0,xs:12,children:e.jsxs(j,{spacing:1,children:[e.jsx(y,{children:"Assign to"}),e.jsx(oe,{id:"assign",value:(t==null?void 0:t.profiles.find(s=>s.id===r.values.assign))||null,onChange:(s,p)=>{r.setFieldValue("assign",p==null?void 0:p.id)},options:t==null?void 0:t.profiles,fullWidth:!0,autoHighlight:!0,getOptionLabel:s=>s.name,isOptionEqualToValue:s=>s.id===r.values.assign,renderOption:({key:s,...p},x)=>e.jsxs(I,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...p,children:[e.jsx("img",{loading:"lazy",width:"20",src:de(`${x.avatar}`,ce.USERS),alt:""}),x.name]},s),renderInput:s=>e.jsx(O,{...s,placeholder:"Choose a assignee",inputProps:{...s.inputProps,autoComplete:"new-password"}})})]})}),e.jsx(c,{item:!0,xs:12,children:e.jsxs(j,{spacing:1,children:[e.jsx(y,{children:"Prioritize"}),e.jsx(q,{children:e.jsxs(ue,{row:!0,"aria-label":"color",value:r.values.priority,onChange:r.handleChange,name:"priority",id:"priority",children:[e.jsx(_,{value:"low",control:e.jsx(A,{color:"primary",sx:{color:"primary.main"}}),label:"Low"}),e.jsx(_,{value:"medium",control:e.jsx(A,{color:"warning",sx:{color:"warning.main"}}),label:"Medium"}),e.jsx(_,{value:"high",control:e.jsx(A,{color:"error",sx:{color:"error.main"}}),label:"High"})]})})]})}),e.jsxs(c,{item:!0,xs:12,children:[e.jsxs(j,{spacing:1,children:[e.jsx(y,{children:"Due date"}),e.jsx(be,{value:r.values.dueDate,format:"dd/MM/yyyy",onChange:s=>{r.setFieldValue("dueDate",s)}})]}),r.touched.dueDate&&r.errors.dueDate&&e.jsx(H,{error:!0,children:r.errors.dueDate})]}),e.jsx(c,{item:!0,xs:12,children:e.jsxs(j,{spacing:1,children:[e.jsx(y,{children:"Description"}),e.jsx(O,{fullWidth:!0,id:"description",name:"description",multiline:!0,rows:3,value:r.values.description,onChange:r.handleChange,error:r.touched.description&&!!r.errors.description,helperText:r.touched.description&&r.errors.description})]})}),e.jsx(c,{item:!0,xs:12,children:e.jsxs(j,{spacing:1,children:[e.jsx(y,{children:"State"}),e.jsx(q,{fullWidth:!0,sx:{m:1},children:e.jsx(he,{id:"columnId",name:"columnId",displayEmpty:!0,value:r.values.columnId,onChange:r.handleChange,inputProps:{"aria-label":"Without label"},children:t==null?void 0:t.columns.map((s,p)=>e.jsx(z,{value:s.id,children:s.title},p))})})]})}),e.jsx(c,{item:!0,xs:12,children:e.jsxs(c,{container:!0,spacing:1,children:[e.jsx(c,{item:!0,xs:12,children:e.jsx(y,{sx:{mt:.5},children:"Attachments:"})}),e.jsx(c,{item:!0,xs:12,children:e.jsx(ve,{type:pe.STANDARD,showList:!0,setFieldValue:r.setFieldValue,files:r.values.files,error:r.touched.files&&!!r.errors.files})}),r.touched.files&&r.errors.files&&e.jsx(c,{item:!0,xs:12,children:e.jsx(H,{error:!0,id:"standard-weight-helper-text-password-login",children:r.errors.files})})]})}),e.jsx(c,{item:!0,xs:12,children:e.jsx(xe,{children:e.jsx(L,{fullWidth:!0,variant:"contained",type:"submit",children:"Save"})})})]})})})})]})})}Ie.propTypes={open:P.bool,handleDrawerOpen:P.func,storyId:P.string};var k={exports:{}},Pe={},N={};Object.defineProperty(N,"__esModule",{value:!0});var cr={icon:function(n,d){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z",fill:n}},{tag:"path",attrs:{d:"M184 840h656V184H184v656zm136-352c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48z",fill:d}},{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z",fill:n}}]}},name:"plus-square",theme:"twotone"};N.default=cr;(function(l){Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"default",{enumerable:!0,get:function(){return b}});var n=x(T),d=s(N),t=s(Re);function r(a,i,o){return i in a?Object.defineProperty(a,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[i]=o,a}function s(a){return a&&a.__esModule?a:{default:a}}function p(a){if(typeof WeakMap!="function")return null;var i=new WeakMap,o=new WeakMap;return(p=function(h){return h?o:i})(a)}function x(a,i){if(!i&&a&&a.__esModule)return a;if(a===null||typeof a!="object"&&typeof a!="function")return{default:a};var o=p(i);if(o&&o.has(a))return o.get(a);var h={__proto__:null},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in a)if(S!=="default"&&Object.prototype.hasOwnProperty.call(a,S)){var M=D?Object.getOwnPropertyDescriptor(a,S):null;M&&(M.get||M.set)?Object.defineProperty(h,S,M):h[S]=a[S]}return h.default=a,o&&o.set(a,h),h}function v(a){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{},h=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(h=h.concat(Object.getOwnPropertySymbols(o).filter(function(D){return Object.getOwnPropertyDescriptor(o,D).enumerable}))),h.forEach(function(D){r(a,D,o[D])})}return a}function g(a,i){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(a);i&&(h=h.filter(function(D){return Object.getOwnPropertyDescriptor(a,D).enumerable})),o.push.apply(o,h)}return o}function f(a,i){return i=i??{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(i,o))}),a}var w=function(a,i){return n.createElement(t.default,f(v({},a),{ref:i,icon:d.default}))},C=n.forwardRef(w),b=C})(Pe);(function(l,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const d=t(Pe);function t(s){return s&&s.__esModule?s:{default:s}}const r=d;n.default=r,l.exports=r})(k,k.exports);var ur=k.exports;const hr=qe(ur),pr=(l,n,d)=>{let t="transparent";return d&&(t=n.palette.mode===U.DARK?n.palette.background.default:n.palette.secondary.lighter),l&&(t=n.palette.mode===U.DARK?n.palette.background.default:n.palette.primary.lighter),{background:t,userSelect:"none"}},xr=()=>({background:"transparent"});function Me({story:l,index:n}){const d=G(),{backlogs:t}=R(),[r,s]=Ee.useState(n===0),p=t==null?void 0:t.columns.filter(m=>m.id===l.columnId)[0],x=t==null?void 0:t.profiles.filter(m=>m.id===l.assign)[0],[v,g]=T.useState(!1),f=()=>{g(m=>!m)},w=()=>{g(m=>!m)},[C,b]=T.useState(!1),a=()=>{b(m=>!m)},i=()=>{b(m=>!m)},[o,h]=T.useState(null),D=m=>{h(m==null?void 0:m.currentTarget)},S=()=>{h(null)},[M,X]=T.useState(!1),We=m=>{X(!1),m&&(Je(l.id),F({open:!0,message:"Task Deleted successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}))};return e.jsxs(e.Fragment,{children:[e.jsx(we,{draggableId:l.id,index:n,children:(m,_e)=>e.jsxs(e.Fragment,{children:[e.jsxs(E,{hover:!0,...m.draggableProps,...m.dragHandleProps,ref:m.innerRef,sx:{...pr(_e.isDragging,d,r),...!r&&{"& .MuiTableCell-root":{border:"none"}}},children:[e.jsx(u,{sx:{pl:3,minWidth:120,width:120,height:46},children:e.jsxs(j,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(V,{title:"Add Task",children:e.jsx(W,{"aria-label":"expand row",onClick:w,size:"small",sx:{fontSize:"1.15rem"},children:e.jsx(hr,{color:d.palette.primary.main})})}),e.jsx(W,{"aria-label":"expand row",size:"small",onClick:()=>s(!r),color:"secondary",children:r?e.jsx(Be,{}):e.jsx(Ve,{})})]})}),e.jsx(u,{sx:{width:110,minWidth:110},children:e.jsxs(j,{direction:"row",spacing:.75,alignItems:"center",children:[e.jsx(Xe,{style:{color:d.palette.primary.main,marginTop:-2}}),e.jsx(B,{variant:"subtitle2",children:l.id})]})}),e.jsx(u,{sx:{maxWidth:"calc(100vw - 850px)",minWidth:140},component:"th",scope:"row",children:e.jsx(me,{underline:"hover",color:"default",onClick:i,sx:{overflow:"hidden",display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",":hover":{color:"primary.main"},cursor:"pointer"},children:l.title})}),e.jsxs(u,{sx:{width:60,minWidth:60},children:[e.jsx(W,{size:"small","aria-controls":"menu-comment",onClick:D,"aria-haspopup":"true",color:"secondary",children:e.jsx(je,{style:{color:d.palette.text.primary}})}),e.jsxs(fe,{id:"menu-comment",anchorEl:o,keepMounted:!0,open:!!o,onClose:S,variant:"selectedMenu",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(z,{onClick:()=>{S(),i()},children:"Edit"}),e.jsx(z,{onClick:()=>{S(),X(!0)},children:"Delete"})]}),e.jsx(Ke,{title:l.title,open:M,handleClose:We})]}),e.jsx(u,{sx:{width:90,minWidth:90},children:p?p.title:""}),e.jsx(u,{sx:{width:140,minWidth:140},children:x?x.name:""}),e.jsx(u,{sx:{width:85,minWidth:85,textTransform:"capitalize"},children:l.priority}),e.jsx(u,{sx:{width:120,minWidth:120},children:l.dueDate?ge(new Date(l.dueDate),"d MMM yyyy"):""})]}),e.jsx(Se,{droppableId:l.id,type:"item",children:$=>{var K;return e.jsx(E,{ref:$.innerRef,...$.droppableProps,sx:xr(),children:e.jsx(u,{style:{padding:0},colSpan:8,children:e.jsx(Fe,{in:r,timeout:"auto",unmountOnExit:!0,children:r&&e.jsx(I,{sx:{margin:0},children:e.jsx(De,{children:e.jsx(Ce,{size:"small","aria-label":"purchases",children:e.jsxs(Te,{children:[(K=l.itemIds)==null?void 0:K.map((Y,Ae)=>e.jsx(Oe,{itemId:Y,index:Ae},Y)),$.placeholder]})})})})})})})}})]})}),e.jsx(Ye,{story:l,open:C,handleDrawerOpen:a}),e.jsx(Ie,{open:v,handleDrawerOpen:f,storyId:l.id})]})}Me.propTypes={story:P.any,index:P.number};const mr=(l,n)=>({background:l?ye(n.palette.secondary.lighter,.65):"transparent"});function Mr(){const l=G(),{backlogs:n}=R(),d=x=>{let v;const{source:g,destination:f,draggableId:w,type:C}=x;if(!f||f.droppableId===g.droppableId&&f.index===g.index)return;if(C==="user-story"){const i=Array.from(n==null?void 0:n.userStoryOrder);i.splice(g.index,1),i.splice(f==null?void 0:f.index,0,w),er(i);return}const b=n==null?void 0:n.userStory.filter(i=>i.id===g.droppableId)[0],a=n==null?void 0:n.userStory.filter(i=>i.id===f.droppableId)[0];if(b===a){const i=Array.from(b.itemIds);i.splice(g.index,1),i.splice(f.index,0,w);const o={...b,itemIds:i};v=n==null?void 0:n.userStory.map(h=>h.id===o.id?o:h)}else{const i=Array.from(b.itemIds);i.splice(g.index,1);const o={...b,itemIds:i},h=Array.from(a.itemIds);h.splice(f.index,0,w);const D={...a,itemIds:h};v=n==null?void 0:n.userStory.map(S=>S.id===o.id?o:S.id===D.id?D:S)}rr(v)},[t,r]=T.useState(!1),s=()=>{r(x=>!x)},p=()=>{r(x=>!x)};return e.jsx($e,{content:!1,children:e.jsxs(De,{sx:{"& .MuiTableCell-root":{p:1.25}},children:[e.jsx(Qe,{onDragEnd:d,children:e.jsx(Se,{droppableId:"user-story",type:"user-story",children:(x,v)=>e.jsxs(Ce,{size:"small","aria-label":"collapsible table",...x.droppableProps,ref:x.innerRef,sx:mr(v.isDraggingOver,l),children:[e.jsx(tr,{sx:{bgcolor:"background.paper",borderTop:"none",borderBottomWidth:"1px","& th,& td":{whiteSpace:"nowrap"}},children:e.jsxs(E,{children:[e.jsx(u,{sx:{pl:3},children:e.jsx(V,{title:"Add User Story",children:e.jsx(L,{variant:"dashed",size:"extraSmall",color:"secondary",onClick:p,endIcon:e.jsx(He,{}),children:"ADD"})})}),e.jsx(u,{children:"Id"}),e.jsx(u,{children:"Title"}),e.jsx(u,{}),e.jsx(u,{children:"State"}),e.jsx(u,{children:"Assigned To"}),e.jsx(u,{children:"Priority"}),e.jsx(u,{children:"Due Date"})]})}),e.jsxs(Te,{sx:{"& th,& td":{whiteSpace:"nowrap"},"& .MuiTableRow-root:last-of-type .MuiTable-root .MuiTableCell-root":{borderBottom:"1px solid",borderColor:"divider"},"& .MuiTableRow-root:hover":{bgcolor:"transparent"}},children:[n==null?void 0:n.userStoryOrder.map((g,f)=>{const w=n==null?void 0:n.userStory.filter(C=>C.id===g)[0];return e.jsx(Me,{story:w,index:f},w.id)}),x.placeholder]})]})})}),e.jsx(ar,{open:t,handleDrawerOpen:s}),e.jsx(Ze,{})]})})}export{Mr as default};
