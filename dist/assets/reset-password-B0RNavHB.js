import{bv as A,aw as I,r as l,j as s,bw as R,aV as C,aW as j,aO as W,G as r,t as m,b3 as g,ay as P,az as k,x as F,b4 as u,aj as q,B as O,T as p,A as T,d as z}from"./index-BHUrCk0l.js";import{A as D}from"./AuthWrapper-DD3yEs3w.js";import{u as L}from"./useScriptRef-7gHbk30W.js";import{s as V,a as G}from"./password-strength-_dbWWfI_.js";import{E as M}from"./EyeOutlined-ecpR533H.js";import{E as $}from"./EyeInvisibleOutlined-CCnz2uFT.js";function H(){const h=L(),b=A(),{isLoggedIn:y}=I(),[t,v]=l.useState(),[c,E]=l.useState(!1),S=()=>{E(!c)},B=e=>{e.preventDefault()},x=e=>{const a=V(e);v(G(a))};return l.useEffect(()=>{x("")},[]),s.jsx(R,{initialValues:{password:"",confirmPassword:"",submit:null},validationSchema:C().shape({password:j().max(255).required("Password is required"),confirmPassword:j().required("Confirm Password is required").test("confirmPassword","Both Password must be match!",(e,a)=>a.parent.password===e)}),onSubmit:async(e,{setErrors:a,setStatus:o,setSubmitting:n})=>{try{h.current&&(o({success:!0}),n(!1),W({open:!0,message:"Successfuly reset password.",variant:"alert",alert:{color:"success"}}),setTimeout(()=>{b(y?"/auth/login":"/login",{replace:!0})},1500))}catch(i){console.error(i),h.current&&(o({success:!1}),a({submit:i.message}),n(!1))}},children:({errors:e,handleBlur:a,handleChange:o,handleSubmit:n,isSubmitting:i,touched:d,values:w})=>s.jsx("form",{noValidate:!0,onSubmit:n,children:s.jsxs(r,{container:!0,spacing:3,children:[s.jsxs(r,{item:!0,xs:12,children:[s.jsxs(m,{spacing:1,children:[s.jsx(g,{htmlFor:"password-reset",children:"Password"}),s.jsx(P,{fullWidth:!0,error:!!(d.password&&e.password),id:"password-reset",type:c?"text":"password",value:w.password,name:"password",onBlur:a,onChange:f=>{o(f),x(f.target.value)},endAdornment:s.jsx(k,{position:"end",children:s.jsx(F,{"aria-label":"toggle password visibility",onClick:S,onMouseDown:B,edge:"end",color:"secondary",children:c?s.jsx(M,{}):s.jsx($,{})})}),placeholder:"Enter password"})]}),d.password&&e.password&&s.jsx(u,{error:!0,id:"helper-text-password-reset",children:e.password}),s.jsx(q,{fullWidth:!0,sx:{mt:2},children:s.jsxs(r,{container:!0,spacing:2,alignItems:"center",children:[s.jsx(r,{item:!0,children:s.jsx(O,{sx:{bgcolor:t==null?void 0:t.color,width:85,height:8,borderRadius:"7px"}})}),s.jsx(r,{item:!0,children:s.jsx(p,{variant:"subtitle1",fontSize:"0.75rem",children:t==null?void 0:t.label})})]})})]}),s.jsxs(r,{item:!0,xs:12,children:[s.jsxs(m,{spacing:1,children:[s.jsx(g,{htmlFor:"confirm-password-reset",children:"Confirm Password"}),s.jsx(P,{fullWidth:!0,error:!!(d.confirmPassword&&e.confirmPassword),id:"confirm-password-reset",type:"password",value:w.confirmPassword,name:"confirmPassword",onBlur:a,onChange:o,placeholder:"Enter confirm password"})]}),d.confirmPassword&&e.confirmPassword&&s.jsx(u,{error:!0,id:"helper-text-confirm-password-reset",children:e.confirmPassword})]}),e.submit&&s.jsx(r,{item:!0,xs:12,children:s.jsx(u,{error:!0,children:e.submit})}),s.jsx(r,{item:!0,xs:12,children:s.jsx(T,{children:s.jsx(z,{disableElevation:!0,disabled:i,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Reset Password"})})})]})})})}function Y(){return s.jsx(D,{children:s.jsxs(r,{container:!0,spacing:3,children:[s.jsx(r,{item:!0,xs:12,children:s.jsxs(m,{sx:{mb:{xs:-.5,sm:.5}},spacing:1,children:[s.jsx(p,{variant:"h3",children:"Reset Password"}),s.jsx(p,{color:"secondary",children:"Please choose your new password"})]})}),s.jsx(r,{item:!0,xs:12,children:s.jsx(H,{})})]})})}export{Y as default};
