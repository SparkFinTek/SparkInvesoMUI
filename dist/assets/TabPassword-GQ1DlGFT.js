import{r as g,j as s,M as $,bw as V,aV as G,aW as y,aO as Z,G as o,t as m,b3 as C,ay as P,az as b,x as S,b4 as O,B as H,T as J,E as R,a7 as d,ag as t,J as c,d as E}from"./index-DWuWYdwO.js";import{m as I,i as L,a as N,b as v,c as q}from"./password-validation-DO7-1Ri2.js";import{C as l}from"./CheckOutlined-ByG7qEtx.js";import{E as k}from"./EyeOutlined-B27Plxqr.js";import{E as A}from"./EyeInvisibleOutlined-B7x8qc4h.js";import{L as p}from"./LineOutlined-F95efzhz.js";function Y(){const[h,z]=g.useState(!1),[j,M]=g.useState(!1),[u,B]=g.useState(!1),D=()=>{z(!h)},F=()=>{M(!j)},T=()=>{B(!u)},f=r=>{r.preventDefault()};return s.jsx($,{title:"Change Password",children:s.jsx(V,{initialValues:{old:"",password:"",confirm:"",submit:null},validationSchema:G().shape({old:y().required("Old Password is required"),password:y().required("New Password is required").matches(/^.*(?=.{8,})((?=.*[!@#$%^&*()\-_=+{};:,<.>]){1})(?=.*\d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$/,"Password must contain at least 8 characters, one uppercase, one number and one special case character"),confirm:y().required("Confirm Password is required").test("confirm","Passwords don't match.",(r,a)=>a.parent.password===r)}),onSubmit:async(r,{resetForm:a,setErrors:i,setStatus:x,setSubmitting:w})=>{try{Z({open:!0,message:"Password changed successfully.",variant:"alert",alert:{color:"success"}}),a(),x({success:!1}),w(!1)}catch(n){x({success:!1}),i({submit:n.message}),w(!1)}},children:({errors:r,handleBlur:a,handleChange:i,handleSubmit:x,isSubmitting:w,touched:n,values:e})=>s.jsx("form",{noValidate:!0,onSubmit:x,children:s.jsxs(o,{container:!0,spacing:3,children:[s.jsxs(o,{item:!0,container:!0,spacing:3,xs:12,sm:6,children:[s.jsxs(o,{item:!0,xs:12,children:[s.jsxs(m,{spacing:1,children:[s.jsx(C,{htmlFor:"password-old",children:"Old Password"}),s.jsx(P,{placeholder:"Enter Old Password",id:"password-old",type:h?"text":"password",value:e.old,name:"old",onBlur:a,onChange:i,endAdornment:s.jsx(b,{position:"end",children:s.jsx(S,{"aria-label":"toggle password visibility",onClick:D,onMouseDown:f,edge:"end",size:"large",color:"secondary",children:h?s.jsx(k,{}):s.jsx(A,{})})}),autoComplete:"password-old"})]}),n.old&&r.old&&s.jsx(O,{error:!0,id:"password-old-helper",children:r.old})]}),s.jsxs(o,{item:!0,xs:12,children:[s.jsxs(m,{spacing:1,children:[s.jsx(C,{htmlFor:"password-password",children:"New Password"}),s.jsx(P,{placeholder:"Enter New Password",id:"password-password",type:j?"text":"password",value:e.password,name:"password",onBlur:a,onChange:i,endAdornment:s.jsx(b,{position:"end",children:s.jsx(S,{"aria-label":"toggle password visibility",onClick:F,onMouseDown:f,edge:"end",size:"large",color:"secondary",children:j?s.jsx(k,{}):s.jsx(A,{})})}),autoComplete:"password-password"})]}),n.password&&r.password&&s.jsx(O,{error:!0,id:"password-password-helper",children:r.password})]}),s.jsxs(o,{item:!0,xs:12,children:[s.jsxs(m,{spacing:1,children:[s.jsx(C,{htmlFor:"password-confirm",children:"Confirm Password"}),s.jsx(P,{placeholder:"Enter Confirm Password",id:"password-confirm",type:u?"text":"password",value:e.confirm,name:"confirm",onBlur:a,onChange:i,endAdornment:s.jsx(b,{position:"end",children:s.jsx(S,{"aria-label":"toggle password visibility",onClick:T,onMouseDown:f,edge:"end",size:"large",color:"secondary",children:u?s.jsx(k,{}):s.jsx(A,{})})}),autoComplete:"password-confirm"})]}),n.confirm&&r.confirm&&s.jsx(O,{error:!0,id:"password-confirm-helper",children:r.confirm})]})]}),s.jsx(o,{item:!0,xs:12,sm:6,children:s.jsxs(H,{sx:{p:{xs:0,sm:2,md:4,lg:5}},children:[s.jsx(J,{variant:"h5",children:"New password must contain:"}),s.jsxs(R,{sx:{p:0,mt:1},children:[s.jsxs(d,{divider:!0,children:[s.jsx(t,{sx:{color:I(e.password)?"success.main":"inherit"},children:I(e.password)?s.jsx(l,{}):s.jsx(p,{})}),s.jsx(c,{primary:"At least 8 characters"})]}),s.jsxs(d,{divider:!0,children:[s.jsx(t,{sx:{color:L(e.password)?"success.main":"inherit"},children:L(e.password)?s.jsx(l,{}):s.jsx(p,{})}),s.jsx(c,{primary:"At least 1 lower letter (a-z)"})]}),s.jsxs(d,{divider:!0,children:[s.jsx(t,{sx:{color:N(e.password)?"success.main":"inherit"},children:N(e.password)?s.jsx(l,{}):s.jsx(p,{})}),s.jsx(c,{primary:"At least 1 uppercase letter (A-Z)"})]}),s.jsxs(d,{divider:!0,children:[s.jsx(t,{sx:{color:v(e.password)?"success.main":"inherit"},children:v(e.password)?s.jsx(l,{}):s.jsx(p,{})}),s.jsx(c,{primary:"At least 1 number (0-9)"})]}),s.jsxs(d,{children:[s.jsx(t,{sx:{color:q(e.password)?"success.main":"inherit"},children:q(e.password)?s.jsx(l,{}):s.jsx(p,{})}),s.jsx(c,{primary:"At least 1 special characters"})]})]})]})}),s.jsx(o,{item:!0,xs:12,children:s.jsxs(m,{direction:"row",justifyContent:"flex-end",alignItems:"center",spacing:2,children:[s.jsx(E,{variant:"outlined",color:"secondary",children:"Cancel"}),s.jsx(E,{disabled:w||Object.keys(r).length!==0,type:"submit",variant:"contained",children:"Save"})]})})]})})})})}export{Y as default};
